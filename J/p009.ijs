pyth_triples =: */@:{.@((#~ 1e3"_ = +/"1)@((, +&.*:/)"1@(,/@(,"0/~@(1&+)@:i.))))

NB. solution 1000 = 31985000 (1.35 secs)
solution =: x:@pyth_triples
